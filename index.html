<script>
(function () {
  const els = {
    days: document.getElementById('days'),
    hours: document.getElementById('hours'),
    mins: document.getElementById('mins'),
    secs: document.getElementById('secs'),
    targetText: document.getElementById('targetText'),
    done: document.getElementById('done'),
    countdown: document.getElementById('countdown'),
    confetti: document.getElementById('confetti'),
    toast: document.getElementById('complimentToast'),
    toastText: document.getElementById('complimentText')
  };

  const BDAY_MONTH = 8; // September (0-indexed)
  const BDAY_DAY = 28;
  const BDAY_HOUR = 23;
  const BDAY_MINUTE = 15;

  let target = nextBirthdayDate();

  function nextBirthdayDate() {
    const now = new Date();
    const target = new Date(
      now.getFullYear(),
      BDAY_MONTH,
      BDAY_DAY,
      BDAY_HOUR,
      BDAY_MINUTE,
      0,
      0
    );
    if (now > target) target.setFullYear(target.getFullYear() + 1);
    return target;
  }

  function pad(n) { return String(n).padStart(2, '0'); }

  function refreshTargetText() {
    const fmt = new Intl.DateTimeFormat(undefined, {
      weekday: 'long', year: 'numeric', month: 'long', day: 'numeric',
      hour: '2-digit', minute: '2-digit'
    });
    els.targetText.textContent = fmt.format(target);
  }
  refreshTargetText();

  function update() {
    const now = Date.now();
    const t = target.getTime();
    let diff = Math.max(0, t - now);
    const SEC=1000, MIN=60*SEC, HOUR=60*MIN, DAY=24*HOUR;

    const d = Math.floor(diff / DAY); diff -= d*DAY;
    const h = Math.floor(diff / HOUR); diff -= h*HOUR;
    const m = Math.floor(diff / MIN); diff -= m*MIN;
    const s = Math.floor(diff / SEC);

    els.days.textContent = d;
    els.hours.textContent = pad(h);
    els.mins.textContent = pad(m);
    els.secs.textContent = pad(s);

    if (t - now <= 0) {
      // Countdown finished ðŸŽ‰
      els.countdown.classList.add('hidden');
      els.done.textContent = "ðŸŽŠðŸŽ‚ HAPPY BIRTHDAY GIULIA ðŸŽ‚ðŸŽŠ";
      els.done.classList.remove('hidden');
      els.done.classList.add('flashy');
      bigCelebration();
    }
  }
  setInterval(update, 1000);
  update();

  // Confetti celebration
  const confetti = (() => {
    const canvas = els.confetti;
    const ctx = canvas.getContext('2d');
    let W, H, pieces = [], running=false, rafId=null;
    function resize(){ W=canvas.width=innerWidth; H=canvas.height=innerHeight; }
    addEventListener('resize', resize);
    function spawn(n=250){ pieces = Array.from({length:n}, ()=>({
      x:Math.random()*W,y:-20-Math.random()*H,s:5+Math.random()*6,
      a:Math.random()*Math.PI*2,v:1+Math.random()*3,w:0.02+Math.random()*0.05,o:0.7+Math.random()*0.3
    })); }
    function draw(){
      ctx.clearRect(0,0,W,H);
      pieces.forEach(p=>{
        p.y+=p.v; p.x+=Math.sin(p.a); p.a+=p.w;
        if(p.y>H+10) p.y=-20;
        ctx.globalAlpha=p.o;
        ctx.save(); ctx.translate(p.x,p.y); ctx.rotate(p.a);
        ctx.fillStyle=`hsl(${(p.a*180/Math.PI*3)%360},80%,70%)`;
        ctx.fillRect(-p.s/2,-p.s/2,p.s,p.s*1.5);
        ctx.restore();
      });
      rafId=requestAnimationFrame(draw);
    }
    return { start(){ if(running) return; resize(); spawn(); canvas.classList.remove('hidden');
      running=true; draw(); },
      stop(){ if(!running)return; running=false; cancelAnimationFrame(rafId);
      ctx.clearRect(0,0,W,H); canvas.classList.add('hidden'); } };
  })();

  function bigCelebration() {
    confetti.start();
    // Keep confetti running longer for finale
    setTimeout(()=>confetti.stop(),15000);

    // Trigger compliments more often for finale
    let finaleCompliments = setInterval(showCompliment, 3000);
    setTimeout(()=>clearInterval(finaleCompliments),15000);
  }

  // Compliments
  const compliments = [
      "Giulia, you sparkle brighter than diamonds ðŸ’Ž",
  "Your smile is pure sunshine ðŸŒ¸",
  "Giulia, you make the world prettier ðŸ’•",
  "Youâ€™re sweeter than cotton candy ðŸ­",
  "Giulia, youâ€™re a dream wrapped in glitter âœ¨",
  "Youâ€™re fabulous and fearless ðŸŒŸ",
  "Giulia, you light up every room ðŸŽ€",
  "Youâ€™re prettier than a pink sunset ðŸŒ…",
  "Giulia, youâ€™re pure magic âœ¨",
  "You make hearts flutter like butterflies ðŸ¦‹",
  "Giulia, you shine brighter than stardust ðŸŒŒ",
  "Your laugh is music to the soul ðŸŽ¶",
  "Giulia, youâ€™re a fairytale come true ðŸ“–âœ¨",
  "You glow like the morning sun ðŸŒž",
  "Giulia, youâ€™re the queen of cuteness ðŸ‘‘ðŸ’•",
  "Youâ€™re dazzling inside and out ðŸ’–",
  "Giulia, youâ€™re a rainbow in human form ðŸŒˆ",
  "You sparkle like champagne bubbles ðŸ¥‚",
  "Giulia, youâ€™re a masterpiece in pink ðŸŽ¨",
  "Your kindness outshines the stars â­",
  "Giulia, youâ€™re sweeter than strawberry cake ðŸ°",
  "Youâ€™re prettier than a bouquet of roses ðŸŒ¹",
  "Giulia, youâ€™re sunshine mixed with sugar ðŸŒ¼ðŸ¬",
  "You light up the darkest days â˜€ï¸",
  "Giulia, youâ€™re pure joy in human form ðŸŽ‰",
  "Youâ€™re magical like a unicorn ðŸ¦„",
  "Giulia, youâ€™re a gentle breeze on a summer day ðŸŒº",
  "Your soul sparkles like crystal âœ¨",
  "Giulia, youâ€™re cuter than a baby bunny ðŸ°",
  "You radiate happiness like confetti ðŸŽŠ",
  "Giulia, youâ€™re a candle in every storm ðŸ•¯ï¸",
  "Youâ€™re sweeter than peaches in summer ðŸ‘",
  "Giulia, youâ€™re as rare as a four-leaf clover ðŸ€",
  "You glow like fairy lights in the night ðŸŒ™",
  "Giulia, youâ€™re breathtaking as a starry sky ðŸŒŒ",
  "Youâ€™re prettier than cherry blossoms ðŸŒ¸",
  "Giulia, you shine like rose gold âœ¨",
  "Youâ€™re sweeter than marshmallows in cocoa â˜•ðŸ¬",
  "Giulia, youâ€™re a poem written in colors ðŸŽ¨",
  "Youâ€™re the sparkle in every celebration ðŸŽ€",
  "Giulia, youâ€™re warmer than sunshine â˜€ï¸ðŸ’•",
  "Youâ€™re a melody that never fades ðŸŽµ",
  "Giulia, youâ€™re as soft as clouds â˜ï¸",
  "Youâ€™re sweeter than honey drizzled pancakes ðŸ¥žðŸ¯",
  "Giulia, youâ€™re love wrapped in sparkles ðŸ’",
  "You glow brighter than fireworks ðŸŽ†",
  "Giulia, youâ€™re a garden in full bloom ðŸŒ·ðŸŒ¼",
  "Youâ€™re more precious than pearls ðŸš",
  "Giulia, youâ€™re a smile waiting to happen ðŸ˜Š",
  "Youâ€™re a wish come true on a birthday cake ðŸŽ‚âœ¨",
  "Giulia, youâ€™re sweeter than bubblegum ðŸ¬",
  "You shine like glitter on fresh snow â„ï¸âœ¨",
  "Giulia, youâ€™re a cozy hug in human form ðŸ¤—",
  "Youâ€™re prettier than twinkling fireflies ðŸŒŸ",
  "Giulia, youâ€™re happiness bottled up ðŸŽ€",
  "Youâ€™re sweeter than cherries on top ðŸ’",
  "Giulia, youâ€™re an endless summer day â˜€ï¸",
  "You glow like neon lights at midnight ðŸ’–",
  "Giulia, youâ€™re the heartbeat of joy ðŸ’“",
  "Youâ€™re lovelier than soft pink petals ðŸŒ¸",
  "Giulia, youâ€™re the sparkle in champagne ðŸ¥‚âœ¨",
  "Youâ€™re as magical as falling snowflakes â„ï¸",
  "Giulia, youâ€™re the prettiest rainbow ðŸŒˆ",
  "Youâ€™re sweeter than a frosted cupcake ðŸ§",
  "Giulia, you shine like a diamond heart ðŸ’ŽðŸ’—",
  "Youâ€™re pure stardust and sunshine ðŸŒžâœ¨",
  "Giulia, youâ€™re the glow after golden hour ðŸŒ…",
  "Youâ€™re cuter than a basket of kittens ðŸ±ðŸ’•",
  "Giulia, you make hearts skip a beat ðŸ’“",
  "Youâ€™re as dreamy as a cotton-candy sky ðŸŒ¸â˜ï¸",
  "Giulia, youâ€™re light wrapped in love ðŸ’•",
"Giulia, Tak Ho loves you very much ðŸ’•",
"Giulia, Tak Ho is crazy for you ðŸŒ¹",
  "You sparkle more than fairy wings ðŸ§š",
  "Giulia, youâ€™re a star that never fades ðŸŒŸ",
  "Youâ€™re prettier than morning dew on roses ðŸŒ¹",
  "Giulia, youâ€™re as rare as moonlight on snow â„ï¸ðŸŒ™",
  "Youâ€™re sweeter than caramel drizzle ðŸ®",
  "Giulia, you shine like fireworks of joy ðŸŽ‡",
  "Youâ€™re more radiant than golden sunlight â˜€ï¸",
  "Giulia, youâ€™re poetry made real âœ¨",
  "Youâ€™re lovelier than wildflowers in spring ðŸŒ¼",
  "Giulia, youâ€™re the sparkle in every jewel ðŸ’Ž",
  "Youâ€™re sweeter than pink lemonade ðŸ¹",
  "Giulia, youâ€™re the magic in every smile ðŸ˜Šâœ¨",
  "You glow like lanterns in the night ðŸ®",
  "Giulia, youâ€™re a pastel dream ðŸŒ¸",
  "Youâ€™re the glitter in every celebration ðŸŽŠ",
  "Giulia, youâ€™re cuteness personified ðŸ’•",
  "Youâ€™re prettier than a rainbow after rain ðŸŒˆ",
  "Giulia, youâ€™re love at first sight ðŸ’˜",
  "Youâ€™re the sparkle that never fades âœ¨"
  ];

  // Shuffle compliments
  for (let i = compliments.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [compliments[i], compliments[j]] = [compliments[j], compliments[i]];
  }

  let complimentIndex = 0;
  function showCompliment() {
    els.toastText.textContent = compliments[complimentIndex % compliments.length];
    complimentIndex++;
    els.toast.classList.add('show');
    clearTimeout(showCompliment._hideTimer);
    showCompliment._hideTimer = setTimeout(() => els.toast.classList.remove('show'), 4000);
  }

  // Start showing compliments
  setTimeout(showCompliment, 1000);
  setInterval(showCompliment, 10000);
})();
</script>

<style>
/* extra flashy celebration text */
.flashy {
  animation: flash 1s infinite alternate;
}
@keyframes flash {
  0% { color: #ff5fad; text-shadow: 0 0 10px #fff, 0 0 20px #ff85c1; }
  100% { color: #ff85c1; text-shadow: 0 0 20px #ff5fad, 0 0 40px #fff; }
}
</style>
</body>
</html>
