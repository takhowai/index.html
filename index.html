<script>
(function () {
  const els = {
    days: document.getElementById('days'),
    hours: document.getElementById('hours'),
    mins: document.getElementById('mins'),
    secs: document.getElementById('secs'),
    targetText: document.getElementById('targetText'),
    done: document.getElementById('done'),
    countdown: document.getElementById('countdown'),
    confetti: document.getElementById('confetti'),
    toast: document.getElementById('complimentToast'),
    toastText: document.getElementById('complimentText')
  };

  const BDAY_MONTH = 8; // September (0-indexed)
  const BDAY_DAY = 28;
  const BDAY_HOUR = 23;
  const BDAY_MINUTE = 15;

  let target = nextBirthdayDate();

  function nextBirthdayDate() {
    const now = new Date();
    const target = new Date(
      now.getFullYear(),
      BDAY_MONTH,
      BDAY_DAY,
      BDAY_HOUR,
      BDAY_MINUTE,
      0,
      0
    );
    if (now > target) target.setFullYear(target.getFullYear() + 1);
    return target;
  }

  function pad(n) { return String(n).padStart(2, '0'); }

  function refreshTargetText() {
    const fmt = new Intl.DateTimeFormat(undefined, {
      weekday: 'long', year: 'numeric', month: 'long', day: 'numeric',
      hour: '2-digit', minute: '2-digit'
    });
    els.targetText.textContent = fmt.format(target);
  }
  refreshTargetText();

  function update() {
    const now = Date.now();
    const t = target.getTime();
    let diff = Math.max(0, t - now);
    const SEC=1000, MIN=60*SEC, HOUR=60*MIN, DAY=24*HOUR;

    const d = Math.floor(diff / DAY); diff -= d*DAY;
    const h = Math.floor(diff / HOUR); diff -= h*HOUR;
    const m = Math.floor(diff / MIN); diff -= m*MIN;
    const s = Math.floor(diff / SEC);

    els.days.textContent = d;
    els.hours.textContent = pad(h);
    els.mins.textContent = pad(m);
    els.secs.textContent = pad(s);

    if (t - now <= 0) {
      // Countdown finished 🎉
      els.countdown.classList.add('hidden');
      els.done.textContent = "🎊🎂 HAPPY BIRTHDAY GIULIA 🎂🎊";
      els.done.classList.remove('hidden');
      els.done.classList.add('flashy');
      bigCelebration();
    }
  }
  setInterval(update, 1000);
  update();

  // Confetti celebration
  const confetti = (() => {
    const canvas = els.confetti;
    const ctx = canvas.getContext('2d');
    let W, H, pieces = [], running=false, rafId=null;
    function resize(){ W=canvas.width=innerWidth; H=canvas.height=innerHeight; }
    addEventListener('resize', resize);
    function spawn(n=250){ pieces = Array.from({length:n}, ()=>({
      x:Math.random()*W,y:-20-Math.random()*H,s:5+Math.random()*6,
      a:Math.random()*Math.PI*2,v:1+Math.random()*3,w:0.02+Math.random()*0.05,o:0.7+Math.random()*0.3
    })); }
    function draw(){
      ctx.clearRect(0,0,W,H);
      pieces.forEach(p=>{
        p.y+=p.v; p.x+=Math.sin(p.a); p.a+=p.w;
        if(p.y>H+10) p.y=-20;
        ctx.globalAlpha=p.o;
        ctx.save(); ctx.translate(p.x,p.y); ctx.rotate(p.a);
        ctx.fillStyle=`hsl(${(p.a*180/Math.PI*3)%360},80%,70%)`;
        ctx.fillRect(-p.s/2,-p.s/2,p.s,p.s*1.5);
        ctx.restore();
      });
      rafId=requestAnimationFrame(draw);
    }
    return { start(){ if(running) return; resize(); spawn(); canvas.classList.remove('hidden');
      running=true; draw(); },
      stop(){ if(!running)return; running=false; cancelAnimationFrame(rafId);
      ctx.clearRect(0,0,W,H); canvas.classList.add('hidden'); } };
  })();

  function bigCelebration() {
    confetti.start();
    // Keep confetti running longer for finale
    setTimeout(()=>confetti.stop(),15000);

    // Trigger compliments more often for finale
    let finaleCompliments = setInterval(showCompliment, 3000);
    setTimeout(()=>clearInterval(finaleCompliments),15000);
  }

  // Compliments
  const compliments = [
      "Giulia, you sparkle brighter than diamonds 💎",
  "Your smile is pure sunshine 🌸",
  "Giulia, you make the world prettier 💕",
  "You’re sweeter than cotton candy 🍭",
  "Giulia, you’re a dream wrapped in glitter ✨",
  "You’re fabulous and fearless 🌟",
  "Giulia, you light up every room 🎀",
  "You’re prettier than a pink sunset 🌅",
  "Giulia, you’re pure magic ✨",
  "You make hearts flutter like butterflies 🦋",
  "Giulia, you shine brighter than stardust 🌌",
  "Your laugh is music to the soul 🎶",
  "Giulia, you’re a fairytale come true 📖✨",
  "You glow like the morning sun 🌞",
  "Giulia, you’re the queen of cuteness 👑💕",
  "You’re dazzling inside and out 💖",
  "Giulia, you’re a rainbow in human form 🌈",
  "You sparkle like champagne bubbles 🥂",
  "Giulia, you’re a masterpiece in pink 🎨",
  "Your kindness outshines the stars ⭐",
  "Giulia, you’re sweeter than strawberry cake 🍰",
  "You’re prettier than a bouquet of roses 🌹",
  "Giulia, you’re sunshine mixed with sugar 🌼🍬",
  "You light up the darkest days ☀️",
  "Giulia, you’re pure joy in human form 🎉",
  "You’re magical like a unicorn 🦄",
  "Giulia, you’re a gentle breeze on a summer day 🌺",
  "Your soul sparkles like crystal ✨",
  "Giulia, you’re cuter than a baby bunny 🐰",
  "You radiate happiness like confetti 🎊",
  "Giulia, you’re a candle in every storm 🕯️",
  "You’re sweeter than peaches in summer 🍑",
  "Giulia, you’re as rare as a four-leaf clover 🍀",
  "You glow like fairy lights in the night 🌙",
  "Giulia, you’re breathtaking as a starry sky 🌌",
  "You’re prettier than cherry blossoms 🌸",
  "Giulia, you shine like rose gold ✨",
  "You’re sweeter than marshmallows in cocoa ☕🍬",
  "Giulia, you’re a poem written in colors 🎨",
  "You’re the sparkle in every celebration 🎀",
  "Giulia, you’re warmer than sunshine ☀️💕",
  "You’re a melody that never fades 🎵",
  "Giulia, you’re as soft as clouds ☁️",
  "You’re sweeter than honey drizzled pancakes 🥞🍯",
  "Giulia, you’re love wrapped in sparkles 💝",
  "You glow brighter than fireworks 🎆",
  "Giulia, you’re a garden in full bloom 🌷🌼",
  "You’re more precious than pearls 🐚",
  "Giulia, you’re a smile waiting to happen 😊",
  "You’re a wish come true on a birthday cake 🎂✨",
  "Giulia, you’re sweeter than bubblegum 🍬",
  "You shine like glitter on fresh snow ❄️✨",
  "Giulia, you’re a cozy hug in human form 🤗",
  "You’re prettier than twinkling fireflies 🌟",
  "Giulia, you’re happiness bottled up 🎀",
  "You’re sweeter than cherries on top 🍒",
  "Giulia, you’re an endless summer day ☀️",
  "You glow like neon lights at midnight 💖",
  "Giulia, you’re the heartbeat of joy 💓",
  "You’re lovelier than soft pink petals 🌸",
  "Giulia, you’re the sparkle in champagne 🥂✨",
  "You’re as magical as falling snowflakes ❄️",
  "Giulia, you’re the prettiest rainbow 🌈",
  "You’re sweeter than a frosted cupcake 🧁",
  "Giulia, you shine like a diamond heart 💎💗",
  "You’re pure stardust and sunshine 🌞✨",
  "Giulia, you’re the glow after golden hour 🌅",
  "You’re cuter than a basket of kittens 🐱💕",
  "Giulia, you make hearts skip a beat 💓",
  "You’re as dreamy as a cotton-candy sky 🌸☁️",
  "Giulia, you’re light wrapped in love 💕",
"Giulia, Tak Ho loves you very much 💕",
"Giulia, Tak Ho is crazy for you 🌹",
  "You sparkle more than fairy wings 🧚",
  "Giulia, you’re a star that never fades 🌟",
  "You’re prettier than morning dew on roses 🌹",
  "Giulia, you’re as rare as moonlight on snow ❄️🌙",
  "You’re sweeter than caramel drizzle 🍮",
  "Giulia, you shine like fireworks of joy 🎇",
  "You’re more radiant than golden sunlight ☀️",
  "Giulia, you’re poetry made real ✨",
  "You’re lovelier than wildflowers in spring 🌼",
  "Giulia, you’re the sparkle in every jewel 💎",
  "You’re sweeter than pink lemonade 🍹",
  "Giulia, you’re the magic in every smile 😊✨",
  "You glow like lanterns in the night 🏮",
  "Giulia, you’re a pastel dream 🌸",
  "You’re the glitter in every celebration 🎊",
  "Giulia, you’re cuteness personified 💕",
  "You’re prettier than a rainbow after rain 🌈",
  "Giulia, you’re love at first sight 💘",
  "You’re the sparkle that never fades ✨"
  ];

  // Shuffle compliments
  for (let i = compliments.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [compliments[i], compliments[j]] = [compliments[j], compliments[i]];
  }

  let complimentIndex = 0;
  function showCompliment() {
    els.toastText.textContent = compliments[complimentIndex % compliments.length];
    complimentIndex++;
    els.toast.classList.add('show');
    clearTimeout(showCompliment._hideTimer);
    showCompliment._hideTimer = setTimeout(() => els.toast.classList.remove('show'), 4000);
  }

  // Start showing compliments
  setTimeout(showCompliment, 1000);
  setInterval(showCompliment, 10000);
})();
</script>

<style>
/* extra flashy celebration text */
.flashy {
  animation: flash 1s infinite alternate;
}
@keyframes flash {
  0% { color: #ff5fad; text-shadow: 0 0 10px #fff, 0 0 20px #ff85c1; }
  100% { color: #ff85c1; text-shadow: 0 0 20px #ff5fad, 0 0 40px #fff; }
}
</style>
</body>
</html>
